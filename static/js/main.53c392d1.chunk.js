(this["webpackJsonpreact-gis"]=this["webpackJsonpreact-gis"]||[]).push([[0],{195:function(e,t){},309:function(e,t,r){"use strict";r.r(t);var n=r(59),a=r(60),i=r(68),c=r(66),o=r(2),s=r(1),l=r.n(s),u=r(18),d=r.n(u),j=(r(158),r(67)),f=r(10),b=r(69),p=r.n(b),h=r(141),O=r(316),y=r(70),m=r(13),x=r(315),g=r(318),v=r(320),L=r(150),C=r(140),k=r.n(C),S=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},P=function(e){if("FeatureCollection"===e.type)switch(e.features[0].geometry.type){case"Point":case"MultiPoint":return"Point";case"Line":case"LineString":case"MultiLineString":return"Line";case"Polygon":case"MultiPolygon":default:return"Polygon"}else{if("Feature"!==e.type)return"Polygon";switch(e.geometry.type){case"Point":case"MultiPoint":return"Point";case"Line":case"LineString":case"MultiLineString":return"Point";case"Polygon":case"MultiPolygon":default:return"Polygon"}}},M=function(e){var t=e.addLayer,r=Object(s.useState)(!1),n=Object(f.a)(r,2),a=n[0],i=n[1],c=function(){return i(!1)},l=function(){return i(!0)},u=Object(s.useCallback)((function(e){var r=e[0],n=r.name.split("."),a=new FileReader;switch(a.onabort=function(){return console.log("Reading was aborted")},a.onerror=function(){return console.log("Reading has failed")},n[1]){case"geojson":a.onload=function(){!function(e,r){var n=JSON.parse(e),a={id:Math.floor(1e3*Math.random()).toString(),name:r,data:n,addedToMap:!1,color:S(),displayType:P(n)};t(a)}(a.result,n[0])},a.readAsText(r);break;case"zip":a.onload=function(){k()(a.result).then((function(e){var r={id:Math.floor(1e4*Math.random()).toString(),name:n[0],data:e,addedToMap:!1,color:S(),displayType:P(e)};t(r)}))},a.readAsArrayBuffer(r);break;default:alert("Mons GIS only supports files of type geojson or zipped shapefile")}})),d=Object(L.a)({onDrop:u}),j=d.getRootProps,b=d.getInputProps,p=d.isDragActive;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1,children:Object(o.jsx)(m.i,{onClick:function(){return l()}})}),Object(o.jsx)(h.a,{md:7,onClick:function(){return l()},children:Object(o.jsx)("h5",{children:"Upload"})})]}),Object(o.jsxs)(g.a,{show:a,onHide:c,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsx)(g.a.Title,{children:"Upload"})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsxs)("div",Object(y.a)(Object(y.a)({},j()),{},{children:[Object(o.jsx)("input",Object(y.a)({},b())),p?Object(o.jsx)("p",{style:{borderStyle:"dotted"},children:"Drop the files here ..."}):Object(o.jsx)("p",{style:{textDecorationLine:"underline"},children:"Drag & drop files here or click to select files"})]}))}),Object(o.jsx)(g.a.Footer,{children:Object(o.jsx)(v.a,{variant:"secondary",onClick:c,children:"Close"})})]})]})},w=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(x.a,{className:"strictRow",children:[Object(o.jsx)(h.a,{md:2,children:Object(o.jsx)(m.e,{size:32})}),Object(o.jsx)(h.a,{md:8,children:Object(o.jsx)("h2",{children:" Mons GIS "})}),Object(o.jsx)(h.a,{md:2})]})})},T=r(42),F=r(317),I=r(321),_=r(0),B=r(148),D=function(e){var t=e.map,r=e.layer,n=e.removeLayer,a=Object(s.useState)(r.color),i=Object(f.a)(a,2),c=i[0],l=i[1],u=Object(s.useState)("visible"),d=Object(f.a)(u,2),j=d[0],b=d[1],p=function(e){"visible"===t.getLayoutProperty(e,"visibility")?(t.setLayoutProperty(e,"visibility","none"),b("none")):(t.setLayoutProperty(e,"visibility","visible"),b("visible"))};return Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1}),Object(o.jsx)(h.a,{md:2,children:"visible"===j?Object(o.jsx)(m.c,{onClick:function(){p(r.id)}}):Object(o.jsx)(m.d,{onClick:function(){p(r.id)}})}),Object(o.jsx)(h.a,{md:4,style:{overflow:"auto"},children:r.name?r.name:r.id}),"Point"===r.displayType?Object(o.jsx)(h.a,{md:2}):Object(o.jsx)(F.a,{trigger:"click",rootClose:!0,placement:"right",overlay:Object(o.jsxs)(I.a,{children:[Object(o.jsx)(I.a.Title,{as:"h3",children:"Change layer color"}),Object(o.jsx)(I.a.Content,{children:Object(o.jsx)(B.a,{color:c,onChangeComplete:function(e,n){switch(l(e.hex),r.color=e.hex,r.displayType){case"Point":t.setPaintProperty(r.id,"icon-color",e.hex);break;case"Line":t.setPaintProperty(r.id,"line-color",e.hex);break;case"Polygon":default:t.setPaintProperty(r.id,"fill-color",e.hex)}}})})]}),children:Object(o.jsx)(h.a,{md:2,children:Object(o.jsx)(_.b.Provider,{value:{color:c},children:Object(o.jsx)(m.b,{})})})},"right"),Object(o.jsx)(h.a,{md:2,children:Object(o.jsx)(m.g,{onClick:function(){return n(r.id)}})})]})},z=function(e){var t=e.map,r=e.lrs,n=e.removeLayer,a=Object(s.useState)(!1),i=Object(f.a)(a,2),c=i[0],l=i[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1,children:Object(o.jsx)(m.a,{onClick:function(){return l(!c)}})}),Object(o.jsx)(h.a,{md:7,onClick:function(){return l(!c)},children:Object(o.jsx)("h5",{children:"Layers"})}),Object(o.jsx)(h.a,{md:3,children:c?Object(o.jsx)(T.a,{size:20,onClick:function(){return l(!c)}}):Object(o.jsx)(T.b,{size:20,onClick:function(){return l(!c)}})})]}),c&&r.map((function(e){return Object(o.jsx)(D,{map:t,layer:e,removeLayer:n},e.id)}))]})},N=r(319),R=r(152),G=r(151),H=r(149),E=r(98),U=r(146),A=function(e){switch(e.type){case"FeatureCollection":return E.a.apply(void 0,Object(j.a)(e.features));case"Feature":default:return e}},J=function(e){var t=e.operation,r=e.lrs,n=e.addLayer,a=Object(s.useState)({}),i=Object(f.a)(a,2),c=i[0],l=i[1],u=Object(s.useState)({}),d=Object(f.a)(u,2),j=d[0],b=d[1],p=Object(s.useState)(!1),O=Object(f.a)(p,2),y=O[0],L=O[1],C=Object(s.useState)(r),k=Object(f.a)(C,2),M=k[0],w=k[1];Object(s.useEffect)((function(){switch(t.title){case"Buffer":default:w(r);break;case"Intersect":case"Union":case"Difference":w(r.filter((function(e){return"Polygon"===e.displayType})));break;case"Clustering":w(r.filter((function(e){return"Point"===e.displayType})))}}),[t,r]);var T=function(){return L(!1)},_=function(){return L(!0)},B=function(e){if(Object.values(c).filter((function(e){return"---"===e})).length>0)alert("Invalid layer selection");else switch(t.title){case"Buffer":var n=function(e,t){var r=Object(H.a)(e.data,t);return{id:"Buff_"+e.name+Math.floor(1e3*Math.random()).toString(),name:"Buff_"+e.name,data:r,addedToMap:!1,color:S(),displayType:P(r)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),j.Radius);D(e,n);break;case"Intersect":var a=function(e,t){var r=A(e.data),n=A(t.data),a=Object(G.a)(r,n);return{id:"IS_"+e.name+"_"+t.name+Math.floor(1e3*Math.random()).toString(),name:"IS_"+e.name+"_"+t.name,data:a,addedToMap:!1,color:S(),displayType:P(a)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),r.find((function(e){return e.id===c[t.layerList[1]]})));D(e,a);break;case"Union":var i=function(e,t){var r=A(e.data),n=A(t.data),a=Object(E.a)(r,n);return{id:"Union_"+e.name+"_"+t.name+Math.floor(1e3*Math.random()).toString(),name:"Union_"+e.name+"_"+t.name,data:a,addedToMap:!1,color:S(),displayType:P(a)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),r.find((function(e){return e.id===c[t.layerList[1]]})));D(e,i);break;case"Difference":var o=function(e,t){var r=A(e.data),n=A(t.data),a=Object(R.a)(r,n);return{id:"Diff_"+e.name+"_"+t.name+Math.floor(1e3*Math.random()).toString(),name:"Diff_"+e.name+"_"+t.name,data:a,addedToMap:!1,color:S(),displayType:P(a)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),r.find((function(e){return e.id===c[t.layerList[1]]})));D(e,o);break;case"Clustering":var s=function(e,t){var r=Object(U.a)(e.data,{numberOfClusters:t});return{id:"Cluster_"+e.name+Math.floor(1e3*Math.random()).toString(),name:"Cluster_"+e.name,data:r,addedToMap:!1,color:S(),displayType:P(r)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),j["Number of Clusters"]);D(e,s);break;default:alert("Defaulted")}},D=function(e,t){t?n(t):alert("No resulting area"),e.preventDefault(),l([])};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:2}),Object(o.jsx)(h.a,{md:6,onClick:_,children:t.title}),Object(o.jsx)(h.a,{md:3,onClick:_})]}),Object(o.jsxs)(g.a,{show:y,onHide:T,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsxs)(g.a.Title,{children:[t.title,Object(o.jsx)(F.a,{trigger:"hover",placement:"right",overlay:Object(o.jsxs)(I.a,{children:[Object(o.jsx)(I.a.Title,{as:"h3",children:"Help"}),Object(o.jsx)(I.a.Content,{children:t.description})]}),children:Object(o.jsx)(m.f,{style:{margin:4}})},"right")]})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsxs)(N.a,{children:[t.layerList.map((function(e){return Object(o.jsxs)(N.a.Group,{controlId:e,children:[Object(o.jsxs)(N.a.Label,{children:["Select ",e]}),Object(o.jsxs)(N.a.Control,{as:"select",onChange:function(t){return l((function(r){return r[e]=t.target.value,c}))},required:!0,children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),M.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.name?e.name:e.id},e.id)}))]})]},e)})),t.parameters&&Object.entries(t.parameters).map((function(e){var t=Object(f.a)(e,2),r=t[0],n=t[1];return Object(o.jsxs)(N.a.Group,{controlId:r.toString(),children:[Object(o.jsx)(N.a.Label,{children:r.toString()}),Object(o.jsx)(N.a.Control,{type:n,onChange:function(e){return b((function(t){return t[r]=e.target.value,t}))}})]},r)}))]})}),Object(o.jsxs)(g.a.Footer,{children:[Object(o.jsx)(v.a,{variant:"secondary",onClick:T,children:"Close"}),Object(o.jsx)(v.a,{variant:"primary",type:"submit",onClick:function(e){B(e),T()},children:"Add Layer"})]})]})]})},V=function(e,t,r,n){if("string"===typeof n)return e.filter((function(e){return e.properties[t]===n}));switch(r){case"=":return e.filter((function(e){return parseFloat(e.properties[t])===n}));case"<=":return e.filter((function(e){return parseFloat(e.properties[t])<=n}));case">=":return e.filter((function(e){return parseFloat(e.properties[t])>=n}));case"<":return e.filter((function(e){return parseFloat(e.properties[t])<n}));case">":return e.filter((function(e){return parseFloat(e.properties[t])>n}));default:return alert("Operator not found, returns empty list."),[]}},q=function(e){return e=e.replace(",","."),!isNaN(parseFloat(e))&&isFinite(e)},Z=function(e){var t={};return Object.entries(e.data.features[0].properties).map((function(e){var r=Object(f.a)(e,2),n=r[0],a=r[1];t[n]=[a]})),e.data.features.forEach((function(e){Object.entries(e.properties).forEach((function(e){var r=Object(f.a)(e,2),n=r[0],a=r[1];"string"!==typeof a||q(a)||t[n].includes(a)||t[n].push(a)}))})),t},K="Property Filter",Q="Creates a new layer with features that satisfy the user-defined rules. The allowed operators depend on the data type of the property selected.",W={number:["=",">=","<=","<",">"],string:["="]},Y=function(e){var t=e.lrs,r=e.addLayer,n=Object(s.useState)(),a=Object(f.a)(n,2),i=a[0],c=a[1],l=Object(s.useState)(),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(s.useState)(),p=Object(f.a)(b,2),O=p[0],y=p[1],L=Object(s.useState)(),C=Object(f.a)(L,2),k=C[0],P=C[1],M=Object(s.useState)(!1),w=Object(f.a)(M,2),T=w[0],_=w[1],B=Object(s.useState)({}),D=Object(f.a)(B,2),z=D[0],R=D[1],G=function(){_(!1),c(),j(),y(),P()},H=function(){return _(!0)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:2}),Object(o.jsx)(h.a,{md:6,onClick:H,children:K}),Object(o.jsx)(h.a,{md:3,onClick:H})]}),Object(o.jsxs)(g.a,{show:T,onHide:G,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsxs)(g.a.Title,{children:[K,Object(o.jsx)(F.a,{trigger:"hover",placement:"right",overlay:Object(o.jsxs)(I.a,{children:[Object(o.jsx)(I.a.Title,{as:"h3",children:"Help"}),Object(o.jsx)(I.a.Content,{children:Q})]}),children:Object(o.jsx)(m.f,{style:{margin:4}})},"right")]})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsxs)(N.a,{children:[Object(o.jsxs)(N.a.Group,{controlId:"layer",children:[Object(o.jsx)(N.a.Label,{children:"Select Layer"}),Object(o.jsxs)(N.a.Control,{as:"select",onChange:function(e){return function(e){if("---"===e)c(),R();else{var r=t.find((function(t){return t.id===e})),n=Z(r);c(r),R(n)}}(e.target.value)},required:!0,children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),t.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.name?e.name:e.id},e.id)}))]})]},"layer"),Object(o.jsxs)(N.a.Group,{controlId:"filter",children:[i&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(N.a.Label,{children:"Select Property"}),Object(o.jsxs)(N.a.Control,{as:"select",onChange:function(e){return function(e){if("---"===e)j();else{var t=e.split(",")[0],r=e.split(",")[1];q(r)?j([t,"number"]):j([t,typeof r])}}(e.target.value)},children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),Object.entries(i.data.features[0].properties).map((function(e){var t=Object(f.a)(e,2),r=t[0],n=t[1];return Object(o.jsx)("option",{value:[r,n],children:r},r)}))]},"property")]}),i&&d&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(N.a.Label,{children:"Select Operator"}),Object(o.jsxs)(N.a.Control,{as:"select",onChange:function(e){return y(e.target.value)},children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),d[1]&&W[d[1]].map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))]},"operator")]}),i&&d&&O&&function(e){switch(console.log(e[1]),e[1]){case"string":return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(N.a.Label,{children:"Select Value"}),Object(o.jsxs)(N.a.Control,{as:"select",onChange:function(e){return P(e.target.value)},children:[Object(o.jsx)("option",{default:!0,value:void 0,children:"---"},"blank"),z[e[0]].map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))]},"strValue")]});case"number":default:return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(N.a.Label,{children:"Select Value"}),Object(o.jsx)(N.a.Control,{type:e[1],onChange:function(e){return P(parseFloat(e.target.value))}},"numValue")]})}}(d)]})]})}),Object(o.jsxs)(g.a.Footer,{children:[Object(o.jsx)(v.a,{variant:"secondary",onClick:G,children:"Close"}),Object(o.jsx)(v.a,{variant:"primary",type:"submit",onClick:function(e){!function(e){if("---"!==O&&k){var t=V(i.data.features,d[0],O,k);if(0===t.length)alert("No features match the defined rules.");else{var n={type:"FeatureCollection",features:t},a={id:i.name+"_filtered"+Math.floor(1e3*Math.random()).toString(),name:i.name+"_filtered",data:n,addedToMap:!1,color:S()};r(a),e.preventDefault(),c(void 0)}}else G(),alert("Operator or value is invalid, please start again.")}(e),G()},children:"Add Layer"})]})]})]})},X=[{id:1,title:"Buffer",layerList:["Layer 1"],parameters:{Radius:"number"},description:"The Buffer Operation takes the features from a source vector layer and creates a buffer area of a specified distance around, storing the result on a Result Layer."},{id:2,title:"Intersect",layerList:["Layer 1","Layer 2"],parameters:{},description:"The Intersect Operation calculates the geometric intersection of two layers."},{id:3,title:"Union",layerList:["Layer 1","Layer 2"],parameters:{},description:"The Union Operation combines the features from two layers into a single, composite layer."},{id:4,title:"Difference",layerList:["Layer 1","Layer 2"],parameters:{},description:"The Difference Operation finds the difference between two polygons by clipping the second polygon from the first."},{id:5,title:"Clustering",layerList:["Layer 1"],parameters:{"Number of Clusters":"number"},description:"The Clustering Operation takes a collection of points and returns the resulting K means clusters. The number of clusters required depends on your applicaiton."}],$=function(e){var t=e.lrs,r=e.addLayer,n=Object(s.useState)(!1),a=Object(f.a)(n,2),i=a[0],c=a[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1,children:Object(o.jsx)(m.h,{})}),Object(o.jsx)(h.a,{md:7,onClick:function(){return c(!i)},children:Object(o.jsx)("h5",{children:"Operations"})}),Object(o.jsx)(h.a,{md:3,children:i?Object(o.jsx)(T.a,{size:20,onClick:function(){return c(!i)}}):Object(o.jsx)(T.b,{size:20,onClick:function(){return c(!i)}})})]}),i&&X.map((function(e){return Object(o.jsx)(J,{operation:e,lrs:t,addLayer:r},e.id)})),i&&Object(o.jsx)(Y,{lrs:t,addLayer:r})]})},ee={position:"absolute",top:0,left:0,width:"100%",background:"white",color:"black",padding:"1em",margin:10,zIndex:"1"},te=function(e){var t=e.map,r=e.lrs,n=e.addLayer,a=e.removeLayer;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(h.a,{md:3,children:Object(o.jsxs)(O.a,{style:ee,children:[Object(o.jsx)(w,{}),Object(o.jsx)($,{lrs:r,addLayer:n}),Object(o.jsx)(z,{map:t,lrs:r,removeLayer:a}),Object(o.jsx)(M,{addLayer:n})]})})})},re=function(e){var t={id:e.id,type:"symbol",source:e.id,layout:{visibility:"visible","icon-image":"marker","icon-size":.08},paint:{"icon-color":"white"}},r={id:e.id,type:"line",source:e.id,layout:{visibility:"visible"},paint:{"line-color":e.color,"line-width":1}},n={id:e.id,type:"fill",source:e.id,layout:{visibility:"visible"},paint:{"fill-color":e.color,"fill-opacity":.6}};if("FeatureCollection"===e.data.type){if(0===e.data.features.length)return alert("No features are present in this layer"),n;switch(console.log("constructLayer",e),e.data.features[0].geometry.type){case"Point":case"MultiPoint":return t;case"Line":case"LineString":case"MultiLineString":return r;case"Polygon":case"MultiPolygon":default:return n}}else{if("Feature"!==e.data.type)return n;switch(e.data.geometry.type){case"Point":case"MultiPoint":return t;case"Line":case"LineString":case"MultiLineString":return r;case"Polygon":case"MultiPolygon":default:return n}}},ne=function(e){switch(e.type){case"Feature":return"Point"===e.features.geometry.type?e.features.geometry.coordinates.slice():e.features.geometry.coordinates[0].slice();case"FeatureCollection":default:return"Point"===e.features[0].geometry.type?e.features[0].geometry.coordinates.slice():e.features[0].geometry.coordinates[0].slice()}},ae=function(e){if(console.log("getdesc",e.features),"Cluster"===e.features[0].layer.id.split("_")[0])return"Cluster "+e.features[0].properties.cluster.toString();switch(e.type){case"Feature":return"Point"===e.features.geometry.type?e.features.properties.description:e.features[0].properties.description;case"FeatureCollection":default:return e.features[0].geometry.type,e.features[0].properties.description}},ie={position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:"-1"},ce={position:"absolute",top:0,right:0,margin:10,padding:10,background:"white",zIndex:"1",display:"flex"},oe=[{id:"streets-v11",name:"Streets"},{id:"light-v10",name:"Light"},{id:"dark-v10",name:"Dark"},{id:"satellite-v9",name:"Satellite"}];p.a.accessToken="pk.eyJ1IjoibW9uc2VtIiwiYSI6ImNraG4yc2syaTBiZ24ydGwxOTg0ZnJiMG0ifQ.B3OT7lkRhmt4w5lTa9fJ2w";var se=function(){var e=Object(s.useState)(null),t=Object(f.a)(e,2),r=t[0],n=t[1],a=Object(s.useState)("streets-v11"),i=Object(f.a)(a,2),c=i[0],l=i[1],u=Object(s.useState)([]),d=Object(f.a)(u,2),b=d[0],h=d[1],O=Object(s.useRef)(null);Object(s.useEffect)((function(){r||function(e){var t=e.setMap,r=e.mapContainer,n=new p.a.Map({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[10.3856,63.4292],zoom:12.2});n.on("load",(function(){n.loadImage("https://cdn4.iconfinder.com/data/icons/social-messaging-productivity-5/128/map-location-person-512.png",(function(e,t){if(e)throw e;n.addImage("marker",t)})),t(n),n.resize()}))}({setMap:n,mapContainer:O}),r&&r.setStyle("mapbox://styles/mapbox/"+c)}),[c,r]),Object(s.useEffect)((function(){r&&b&&function(e,t){t.filter((function(e){return!e.addedToMap})).forEach((function(t){e.addSource(t.id,{type:"geojson",data:t.data}),e.addLayer(re(t)),t.addedToMap=!0,"Point"===t.displayType&&(e.on("click",t.id,(function(t){for(var r=ne(t),n=ae(t);Math.abs(t.lngLat.lng-r[0])>180;)r[0]+=t.lngLat.lng>r[0]?360:-360;(new p.a.Popup).setLngLat(r).setHTML(n).addTo(e)})),e.on("mouseenter",t.id,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",t.id,(function(){e.getCanvas().style.cursor=""})))}))}(r,b)}),[b,r]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(te,{map:r,lrs:b,addLayer:function(e){h((function(t){return[].concat(Object(j.a)(t),[e])}))},removeLayer:function(e){r.removeLayer(e),r.removeSource(e),h((function(t){return t.filter((function(t){return t.id!==e}))}))},toggleVisibility:function(e){"visible"===r.getLayoutProperty(e,"visibility")?r.setLayoutProperty(e,"visibility","none"):r.setLayoutProperty(e,"visibility","visible")}}),Object(o.jsx)("div",{style:ce,children:oe.map((function(e){return Object(o.jsxs)("div",{style:{margin:4},children:[Object(o.jsx)("input",{id:e.id,type:"radio",name:"rtoggle",value:e.id,onClick:function(){l(e.id),h([])},defaultChecked:e.id===c}),Object(o.jsx)("label",{style:{margin:2},children:e.name})]},e.id)}))}),Object(o.jsx)("div",{ref:function(e){return O.current=e},style:ie})]})},le=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(a.a)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Something went wrong."}),Object(o.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),Object(o.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),r}(l.a.Component);var ue=function(){return Object(o.jsx)("div",{children:Object(o.jsx)(le,{children:Object(o.jsx)(se,{})})})},de=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(ue,{})})}}]),r}(l.a.Component);d.a.render(Object(o.jsx)(de,{}),document.getElementById("app"))}},[[309,1,2]]]);
//# sourceMappingURL=main.53c392d1.chunk.js.map