(this["webpackJsonpreact-gis"]=this["webpackJsonpreact-gis"]||[]).push([[0],{196:function(e,t){},310:function(e,t,r){"use strict";r.r(t);var n=r(60),a=r(61),i=r(68),c=r(66),o=r(2),s=r(1),l=r.n(s),u=r(18),d=r.n(u),j=(r(159),r(67)),f=r(10),b=r(69),p=r.n(b),h=r(142),O=r(317),y=r(70),m=r(12),x=r(316),g=r(319),v=r(318),C=r(321),L=r(322),S=r(151),k=r(141),M=r.n(k),P=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},T=function(e){if("FeatureCollection"===e.type)switch(e.features[0].geometry.type){case"Point":case"MultiPoint":return"Point";case"Line":case"LineString":case"MultiLineString":return"Line";case"Polygon":case"MultiPolygon":default:return"Polygon"}else{if("Feature"!==e.type)return"Polygon";switch(e.geometry.type){case"Point":case"MultiPoint":return"Point";case"Line":case"LineString":case"MultiLineString":return"Point";case"Polygon":case"MultiPolygon":default:return"Polygon"}}},w=function(e){var t=e.addLayer,r=Object(s.useState)(!1),n=Object(f.a)(r,2),a=n[0],i=n[1],c=function(){return i(!1)},l=function(){return i(!0)},u=Object(s.useCallback)((function(e){var r=e[0],n=r.name.split("."),a=new FileReader;switch(a.onabort=function(){return console.log("Reading was aborted")},a.onerror=function(){return console.log("Reading has failed")},n[1]){case"geojson":a.onload=function(){!function(e,r){var n=JSON.parse(e),a={id:Math.floor(1e3*Math.random()).toString(),name:r,data:n,addedToMap:!1,color:P(),displayType:T(n)};t(a)}(a.result,n[0])},a.readAsText(r);break;case"zip":a.onload=function(){M()(a.result).then((function(e){var r={id:Math.floor(1e4*Math.random()).toString(),name:n[0],data:e,addedToMap:!1,color:P(),displayType:T(e)};t(r)}))},a.readAsArrayBuffer(r);break;default:alert("Mons GIS only supports files of type geojson or zipped shapefile")}})),d=Object(S.a)({onDrop:u}),j=d.getRootProps,b=d.getInputProps,p=d.isDragActive;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1,children:Object(o.jsx)(m.i,{onClick:function(){return l()}})}),Object(o.jsx)(h.a,{md:7,onClick:function(){return l()},children:Object(o.jsx)("h5",{children:"Upload"})})]}),Object(o.jsxs)(g.a,{show:a,onHide:c,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsxs)(g.a.Title,{children:["Upload",Object(o.jsx)(v.a,{trigger:"hover",placement:"right",overlay:Object(o.jsxs)(C.a,{children:[Object(o.jsx)(C.a.Title,{as:"h3",children:"Help"}),Object(o.jsx)(C.a.Content,{children:"Please upload a single file at a time. This application supports geojson and zipped shapefiles."})]}),children:Object(o.jsx)(m.f,{style:{margin:4}})},"right")]})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsxs)("div",Object(y.a)(Object(y.a)({},j()),{},{children:[Object(o.jsx)("input",Object(y.a)({},b())),p?Object(o.jsx)("p",{style:{borderStyle:"dotted"},children:"Drop the file here ..."}):Object(o.jsx)("p",{style:{textDecorationLine:"underline"},children:"Drag & drop a file here or click to select file"})]}))}),Object(o.jsx)(g.a.Footer,{children:Object(o.jsx)(L.a,{variant:"secondary",onClick:c,children:"Close"})})]})]})},F=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(x.a,{className:"strictRow",children:[Object(o.jsx)(h.a,{md:2,children:Object(o.jsx)(m.e,{size:32})}),Object(o.jsx)(h.a,{md:8,children:Object(o.jsx)("h2",{children:" Mons GIS "})}),Object(o.jsx)(h.a,{md:2})]})})},I=r(43),D=r(320),B=r(0),_=r(149),N=function(e){var t=e.map,r=e.layer,n=e.removeLayer,a=Object(s.useState)(r.color),i=Object(f.a)(a,2),c=i[0],l=i[1],u=Object(s.useState)("visible"),d=Object(f.a)(u,2),j=d[0],b=d[1],p=Object(s.useState)(r.name),O=Object(f.a)(p,2),y=(O[0],O[1]),S=Object(s.useState)(!1),k=Object(f.a)(S,2),M=k[0],P=k[1],T=function(){return P(!1)},w=function(e){"visible"===t.getLayoutProperty(e,"visibility")?(t.setLayoutProperty(e,"visibility","none"),b("none")):(t.setLayoutProperty(e,"visibility","visible"),b("visible"))};return Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1}),Object(o.jsx)(h.a,{md:2,children:"visible"===j?Object(o.jsx)(m.c,{onClick:function(){w(r.id)}}):Object(o.jsx)(m.d,{onClick:function(){w(r.id)}})}),Object(o.jsx)(h.a,{md:4,style:{overflow:"auto"},onClick:function(){return P(!0)},children:r.name?r.name:r.id}),Object(o.jsxs)(g.a,{show:M,onHide:T,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsx)(g.a.Title,{children:"Change Layer Name"})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsx)(D.a,{onSubmit:function(e){return e.preventDefault()},children:Object(o.jsxs)(D.a.Group,{controlId:"nameChange",children:[Object(o.jsx)(D.a.Label,{children:"New Name"}),Object(o.jsx)(D.a.Control,{type:"string",onChange:function(e){return t=e.target.value,y(t),void(r.name=t);var t}})]},"nameChange")})}),Object(o.jsxs)(g.a.Footer,{children:[Object(o.jsx)(L.a,{variant:"secondary",onClick:T,children:"Close"}),Object(o.jsx)(L.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),T()},children:"Change Name"})]})]}),"Point"===r.displayType?Object(o.jsx)(h.a,{md:2}):Object(o.jsx)(v.a,{trigger:"click",rootClose:!0,placement:"right",overlay:Object(o.jsxs)(C.a,{children:[Object(o.jsx)(C.a.Title,{as:"h3",children:"Change layer color"}),Object(o.jsx)(C.a.Content,{children:Object(o.jsx)(_.a,{color:c,onChangeComplete:function(e,n){switch(l(e.hex),r.color=e.hex,r.displayType){case"Point":t.setPaintProperty(r.id,"icon-color",e.hex);break;case"Line":t.setPaintProperty(r.id,"line-color",e.hex);break;case"Polygon":default:t.setPaintProperty(r.id,"fill-color",e.hex)}}})})]}),children:Object(o.jsx)(h.a,{md:2,children:Object(o.jsx)(B.b.Provider,{value:{color:c},children:Object(o.jsx)(m.b,{})})})},"right"),Object(o.jsx)(h.a,{md:2,children:Object(o.jsx)(m.g,{onClick:function(){return n(r.id)}})})]})},z=function(e){var t=e.map,r=e.lrs,n=e.removeLayer,a=Object(s.useState)(!1),i=Object(f.a)(a,2),c=i[0],l=i[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1,children:Object(o.jsx)(m.a,{onClick:function(){return l(!c)}})}),Object(o.jsx)(h.a,{md:7,onClick:function(){return l(!c)},children:Object(o.jsx)("h5",{children:"Layers"})}),Object(o.jsx)(h.a,{md:3,children:c?Object(o.jsx)(I.a,{size:20,onClick:function(){return l(!c)}}):Object(o.jsx)(I.b,{size:20,onClick:function(){return l(!c)}})})]}),c&&r.map((function(e){return Object(o.jsx)(N,{map:t,layer:e,removeLayer:n},e.id)}))]})},H=r(98),G=r(153),R=r(152),E=r(150),U=r(99),J=r(9),A=r(147),V=function(e){switch(e.type){case"FeatureCollection":return U.a.apply(void 0,Object(j.a)(e.features));case"Feature":default:return e}},q=function(e){var t=e.operation,r=e.lrs,n=e.addLayer,a=Object(s.useState)({}),i=Object(f.a)(a,2),c=i[0],l=i[1],u=Object(s.useState)({}),d=Object(f.a)(u,2),j=d[0],b=d[1],p=Object(s.useState)(!1),O=Object(f.a)(p,2),y=O[0],S=O[1],k=Object(s.useState)(r),M=Object(f.a)(k,2),w=M[0],F=M[1];Object(s.useEffect)((function(){switch(t.title){case"Buffer":default:F(r);break;case"Intersect":case"Union":case"Difference":F(r.filter((function(e){return"Polygon"===e.displayType})));break;case"Clustering":F(r.filter((function(e){return"Point"===e.displayType})))}}),[t,r]);var I=function(){return S(!1)},B=function(){return S(!0)},_=function(e){if(Object.values(c).filter((function(e){return"---"===e})).length>0)alert("Invalid layer selection");else switch(t.title){case"Buffer":var n=function(e,t){var r=Object(E.a)(e.data,t);return{id:"Buff_"+e.name+Math.floor(1e3*Math.random()).toString(),name:"Buff_"+e.name,data:r,addedToMap:!1,color:P(),displayType:T(r)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),j.Radius);N(e,n);break;case"Intersect":var a=function(e,t){var r=V(e.data),n=V(t.data),a=[],i=[];a="MultiPolygon"===r.geometry.type?r.geometry.coordinates.map((function(e){return Object(J.i)(e)})):[r],i="MultiPolygon"===n.geometry.type?n.geometry.coordinates.map((function(e){return Object(J.i)(e)})):[n];var c,o={features:[],type:"FeatureCollection"},s=Object(H.a)(a);try{for(s.s();!(c=s.n()).done;){var l,u=c.value,d=Object(H.a)(i);try{for(d.s();!(l=d.n()).done;){var j=l.value,f=Object(R.a)(u,j);f&&o.features.push(f)}}catch(b){d.e(b)}finally{d.f()}}}catch(b){s.e(b)}finally{s.f()}return{id:"IS_"+e.name+"_"+t.name+Math.floor(1e3*Math.random()).toString(),name:"IS_"+e.name+"_"+t.name,data:o,addedToMap:!1,color:P(),displayType:T(o)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),r.find((function(e){return e.id===c[t.layerList[1]]})));N(e,a);break;case"Union":var i=function(e,t){var r=V(e.data),n=V(t.data),a=Object(U.a)(r,n);return{id:"Union_"+e.name+"_"+t.name+Math.floor(1e3*Math.random()).toString(),name:"Union_"+e.name+"_"+t.name,data:a,addedToMap:!1,color:P(),displayType:T(a)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),r.find((function(e){return e.id===c[t.layerList[1]]})));N(e,i);break;case"Difference":var o=function(e,t){var r=V(e.data),n=V(t.data),a=Object(G.a)(r,n);return{id:"Diff_"+e.name+"_"+t.name+Math.floor(1e3*Math.random()).toString(),name:"Diff_"+e.name+"_"+t.name,data:a,addedToMap:!1,color:P(),displayType:T(a)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),r.find((function(e){return e.id===c[t.layerList[1]]})));N(e,o);break;case"Clustering":var s=function(e,t){var r=Object(A.a)(e.data,{numberOfClusters:t});return{id:"Cluster_"+e.name+Math.floor(1e3*Math.random()).toString(),name:"Cluster_"+e.name,data:r,addedToMap:!1,color:P(),displayType:T(r)}}(r.find((function(e){return e.id===c[t.layerList[0]]})),j["Number of Clusters"]);N(e,s);break;default:alert("Defaulted")}},N=function(e,t){t?n(t):alert("No resulting area"),e.preventDefault(),l([])};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:2}),Object(o.jsx)(h.a,{md:6,onClick:B,children:t.title}),Object(o.jsx)(h.a,{md:3,onClick:B})]}),Object(o.jsxs)(g.a,{show:y,onHide:I,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsxs)(g.a.Title,{children:[t.title,Object(o.jsx)(v.a,{trigger:"hover",placement:"right",overlay:Object(o.jsxs)(C.a,{children:[Object(o.jsx)(C.a.Title,{as:"h3",children:"Help"}),Object(o.jsx)(C.a.Content,{children:t.description})]}),children:Object(o.jsx)(m.f,{style:{margin:4}})},"right")]})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsxs)(D.a,{onSubmit:function(e){return e.preventDefault()},children:[t.layerList.map((function(e){return Object(o.jsxs)(D.a.Group,{controlId:e,children:[Object(o.jsxs)(D.a.Label,{children:["Select ",e]}),Object(o.jsxs)(D.a.Control,{as:"select",onChange:function(t){return l((function(r){return r[e]=t.target.value,c}))},required:!0,children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),w.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.name?e.name:e.id},e.id)}))]})]},e)})),t.parameters&&Object.entries(t.parameters).map((function(e){var t=Object(f.a)(e,2),r=t[0],n=t[1];return Object(o.jsxs)(D.a.Group,{controlId:r.toString(),children:[Object(o.jsx)(D.a.Label,{children:r.toString()}),Object(o.jsx)(D.a.Control,{type:n,onChange:function(e){return b((function(t){return t[r]=e.target.value,t}))}})]},r)}))]})}),Object(o.jsxs)(g.a.Footer,{children:[Object(o.jsx)(L.a,{variant:"secondary",onClick:I,children:"Close"}),Object(o.jsx)(L.a,{variant:"primary",type:"submit",onClick:function(e){_(e),I()},children:"Add Layer"})]})]})]})},Z=function(e,t,r,n){if("string"===typeof n)return e.filter((function(e){return e.properties[t]===n}));switch(r){case"=":return e.filter((function(e){return parseFloat(e.properties[t])===n}));case"<=":return e.filter((function(e){return parseFloat(e.properties[t])<=n}));case">=":return e.filter((function(e){return parseFloat(e.properties[t])>=n}));case"<":return e.filter((function(e){return parseFloat(e.properties[t])<n}));case">":return e.filter((function(e){return parseFloat(e.properties[t])>n}));default:return alert("Operator not found, returns empty list."),[]}},K=function(e){return e=e.replace(",","."),!isNaN(parseFloat(e))&&isFinite(e)},Q=function(e){var t={};return Object.entries(e.data.features[0].properties).map((function(e){var r=Object(f.a)(e,2),n=r[0],a=r[1];t[n]=[a]})),e.data.features.forEach((function(e){Object.entries(e.properties).forEach((function(e){var r=Object(f.a)(e,2),n=r[0],a=r[1];"string"!==typeof a||K(a)||t[n].includes(a)||t[n].push(a)}))})),t},W="Property Filter",Y="Creates a new layer with features that satisfy the user-defined rules. The allowed operators depend on the data type of the property selected.",X={number:["=",">=","<=","<",">"],string:["="]},$=function(e){var t=e.lrs,r=e.addLayer,n=Object(s.useState)(),a=Object(f.a)(n,2),i=a[0],c=a[1],l=Object(s.useState)(),u=Object(f.a)(l,2),d=u[0],j=u[1],b=Object(s.useState)(),p=Object(f.a)(b,2),O=p[0],y=p[1],S=Object(s.useState)(),k=Object(f.a)(S,2),M=k[0],w=k[1],F=Object(s.useState)(!1),I=Object(f.a)(F,2),B=I[0],_=I[1],N=Object(s.useState)({}),z=Object(f.a)(N,2),H=z[0],G=z[1],R=function(){_(!1),c(),j(),y(),w()},E=function(){return _(!0)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:2}),Object(o.jsx)(h.a,{md:6,onClick:E,children:W}),Object(o.jsx)(h.a,{md:3,onClick:E})]}),Object(o.jsxs)(g.a,{show:B,onHide:R,children:[Object(o.jsx)(g.a.Header,{closeButton:!0,children:Object(o.jsxs)(g.a.Title,{children:[W,Object(o.jsx)(v.a,{trigger:"hover",placement:"right",overlay:Object(o.jsxs)(C.a,{children:[Object(o.jsx)(C.a.Title,{as:"h3",children:"Help"}),Object(o.jsx)(C.a.Content,{children:Y})]}),children:Object(o.jsx)(m.f,{style:{margin:4}})},"right")]})}),Object(o.jsx)(g.a.Body,{children:Object(o.jsxs)(D.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(o.jsxs)(D.a.Group,{controlId:"layer",children:[Object(o.jsx)(D.a.Label,{children:"Select Layer"}),Object(o.jsxs)(D.a.Control,{as:"select",onChange:function(e){return function(e){if("---"===e)c(),G();else{var r=t.find((function(t){return t.id===e})),n=Q(r);c(r),G(n)}}(e.target.value)},required:!0,children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),t.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.name?e.name:e.id},e.id)}))]})]},"layer"),Object(o.jsxs)(D.a.Group,{controlId:"filter",children:[i&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a.Label,{children:"Select Property"}),Object(o.jsxs)(D.a.Control,{as:"select",onChange:function(e){return function(e){if("---"===e)j();else{var t=e.split(",")[0],r=e.split(",")[1];K(r)?j([t,"number"]):j([t,typeof r])}}(e.target.value)},children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),Object.entries(i.data.features[0].properties).map((function(e){var t=Object(f.a)(e,2),r=t[0],n=t[1];return Object(o.jsx)("option",{value:[r,n],children:r},r)}))]},"property")]}),i&&d&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a.Label,{children:"Select Operator"}),Object(o.jsxs)(D.a.Control,{as:"select",onChange:function(e){return y(e.target.value)},children:[Object(o.jsx)("option",{default:!0,value:null,children:"---"},"blank"),d[1]&&X[d[1]].map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))]},"operator")]}),i&&d&&O&&function(e){switch(e[1]){case"string":return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a.Label,{children:"Select Value"}),Object(o.jsxs)(D.a.Control,{as:"select",onChange:function(e){return w(e.target.value)},children:[Object(o.jsx)("option",{default:!0,value:void 0,children:"---"},"blank"),H[e[0]].map((function(e){return Object(o.jsx)("option",{value:e,children:e},e)}))]},"strValue")]});case"number":default:return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(D.a.Label,{children:"Select Value"}),Object(o.jsx)(D.a.Control,{type:e[1],onChange:function(e){return w(parseFloat(e.target.value))}},"numValue")]})}}(d)]})]})}),Object(o.jsxs)(g.a.Footer,{children:[Object(o.jsx)(L.a,{variant:"secondary",onClick:R,children:"Close"}),Object(o.jsx)(L.a,{variant:"primary",type:"submit",onClick:function(e){!function(e){if("---"!==O&&M){var t=Z(i.data.features,d[0],O,M);if(0===t.length)alert("No features match the defined rules.");else{var n={type:"FeatureCollection",features:t},a={id:i.name+"_filtered"+Math.floor(1e3*Math.random()).toString(),name:i.name+"_filtered",data:n,addedToMap:!1,color:P(),displayType:T(n)};r(a),e.preventDefault(),c(void 0)}}else R(),alert("Operator or value is invalid, please start again.")}(e),R()},children:"Add Layer"})]})]})]})},ee=[{id:1,title:"Buffer",layerList:["Layer 1"],parameters:{Radius:"number"},description:"The Buffer Operation takes the features from a source vector layer and creates a buffer area of a specified distance around, storing the result on a Result Layer. The radius is specified in kilometers. Use '0.1' for decimals, commas ('0,1') are not accepted."},{id:2,title:"Intersect",layerList:["Layer 1","Layer 2"],parameters:{},description:"The Intersect Operation calculates the geometric intersection of two layers."},{id:3,title:"Union",layerList:["Layer 1","Layer 2"],parameters:{},description:"The Union Operation combines the features from two layers into a single, composite layer."},{id:4,title:"Difference",layerList:["Layer 1","Layer 2"],parameters:{},description:"The Difference Operation finds the difference between two polygons by clipping the second polygon from the first."},{id:5,title:"Clustering",layerList:["Layer 1"],parameters:{"Number of Clusters":"number"},description:"The Clustering Operation takes a collection of points and returns the resulting K means clusters. The number of clusters required depends on your applicaiton."}],te=function(e){var t=e.lrs,r=e.addLayer,n=Object(s.useState)(!1),a=Object(f.a)(n,2),i=a[0],c=a[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(x.a,{children:[Object(o.jsx)(h.a,{md:1,children:Object(o.jsx)(m.h,{})}),Object(o.jsx)(h.a,{md:7,onClick:function(){return c(!i)},children:Object(o.jsx)("h5",{children:"Operations"})}),Object(o.jsx)(h.a,{md:3,children:i?Object(o.jsx)(I.a,{size:20,onClick:function(){return c(!i)}}):Object(o.jsx)(I.b,{size:20,onClick:function(){return c(!i)}})})]}),i&&ee.map((function(e){return Object(o.jsx)(q,{operation:e,lrs:t,addLayer:r},e.id)})),i&&Object(o.jsx)($,{lrs:t,addLayer:r})]})},re={position:"absolute",top:0,left:0,width:"100%",background:"rgba(255,255,255,0.7)",color:"black",padding:"1em",margin:10,zIndex:"1"},ne=function(e){var t=e.map,r=e.lrs,n=e.addLayer,a=e.removeLayer;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(h.a,{md:3,children:Object(o.jsxs)(O.a,{style:re,children:[Object(o.jsx)(F,{}),Object(o.jsx)(te,{lrs:r,addLayer:n}),Object(o.jsx)(z,{map:t,lrs:r,removeLayer:a}),Object(o.jsx)(w,{addLayer:n})]})})})},ae=function(e){var t={id:e.id,type:"symbol",source:e.id,layout:{visibility:"visible","icon-image":"marker","icon-size":.08},paint:{"icon-color":"white"}},r={id:e.id,type:"line",source:e.id,layout:{visibility:"visible"},paint:{"line-color":e.color,"line-width":1}},n={id:e.id,type:"fill",source:e.id,layout:{visibility:"visible"},paint:{"fill-color":e.color,"fill-opacity":.6}};if("FeatureCollection"===e.data.type){if(0===e.data.features.length)return alert("No features are present in this layer"),n;switch(e.data.features[0].geometry.type){case"Point":case"MultiPoint":return t;case"Line":case"LineString":case"MultiLineString":return r;case"Polygon":case"MultiPolygon":default:return n}}else{if("Feature"!==e.data.type)return n;switch(e.data.geometry.type){case"Point":case"MultiPoint":return t;case"Line":case"LineString":case"MultiLineString":return r;case"Polygon":case"MultiPolygon":default:return n}}},ie=function(e){switch(e.type){case"Feature":return"Point"===e.features.geometry.type?e.features.geometry.coordinates.slice():e.features.geometry.coordinates[0].slice();case"FeatureCollection":default:return"Point"===e.features[0].geometry.type?e.features[0].geometry.coordinates.slice():e.features[0].geometry.coordinates[0].slice()}},ce=function(e){if("Cluster"===e.features[0].layer.id.split("_")[0])return"Cluster "+e.features[0].properties.cluster.toString();switch(e.type){case"Feature":return"Point"===e.features.geometry.type?e.features.properties.description:e.features[0].properties.description;case"FeatureCollection":default:return e.features[0].geometry.type,e.features[0].properties.description}},oe={position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:"-1"},se={position:"absolute",top:0,right:0,margin:10,padding:10,background:"rgba(255,255,255,0.7)",zIndex:"1",display:"flex"},le=[{id:"light-v10",name:"Light"},{id:"streets-v11",name:"Streets"},{id:"dark-v10",name:"Dark"},{id:"satellite-v9",name:"Satellite"}];p.a.accessToken="pk.eyJ1IjoibW9uc2VtIiwiYSI6ImNraG4yc2syaTBiZ24ydGwxOTg0ZnJiMG0ifQ.B3OT7lkRhmt4w5lTa9fJ2w";var ue=function(){var e=Object(s.useState)(null),t=Object(f.a)(e,2),r=t[0],n=t[1],a=Object(s.useState)("light-v10"),i=Object(f.a)(a,2),c=i[0],l=i[1],u=Object(s.useState)([]),d=Object(f.a)(u,2),b=d[0],h=d[1],O=Object(s.useRef)(null);Object(s.useEffect)((function(){r||function(e){var t=e.setMap,r=e.mapContainer,n=new p.a.Map({container:r.current,style:"mapbox://styles/mapbox/light-v10",center:[10.3856,63.4292],zoom:12.2});n.on("load",(function(){n.loadImage("https://cdn4.iconfinder.com/data/icons/social-messaging-productivity-5/128/map-location-person-512.png",(function(e,t){if(e)throw e;n.addImage("marker",t)})),t(n),n.resize()}))}({setMap:n,mapContainer:O}),r&&r.setStyle("mapbox://styles/mapbox/"+c)}),[c,r]),Object(s.useEffect)((function(){r&&b&&function(e,t){t.filter((function(e){return!e.addedToMap})).forEach((function(t){e.addSource(t.id,{type:"geojson",data:t.data}),e.addLayer(ae(t)),t.addedToMap=!0,"Point"===t.displayType&&(e.on("click",t.id,(function(t){for(var r=ie(t),n=ce(t);Math.abs(t.lngLat.lng-r[0])>180;)r[0]+=t.lngLat.lng>r[0]?360:-360;(new p.a.Popup).setLngLat(r).setHTML(n).addTo(e)})),e.on("mouseenter",t.id,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",t.id,(function(){e.getCanvas().style.cursor=""})))}))}(r,b)}),[r,b]);return Object(o.jsxs)("div",{children:[Object(o.jsx)(ne,{map:r,lrs:b,addLayer:function(e){h((function(t){return[].concat(Object(j.a)(t),[e])}))},removeLayer:function(e){r.removeLayer(e),r.removeSource(e),h((function(t){return t.filter((function(t){return t.id!==e}))}))},toggleVisibility:function(e){"visible"===r.getLayoutProperty(e,"visibility")?r.setLayoutProperty(e,"visibility","none"):r.setLayoutProperty(e,"visibility","visible")}}),Object(o.jsx)("div",{style:se,children:le.map((function(e){return Object(o.jsxs)("div",{style:{margin:4},children:[Object(o.jsx)("input",{id:e.id,type:"radio",name:"rtoggle",value:e.id,onClick:function(){return function(e){var t=JSON.parse(JSON.stringify(b));l(e),t.forEach((function(e){e.id=Math.floor(1e4*Math.random()).toString(),e.addedToMap=!1})),h(t)}(e.id)},defaultChecked:e.id===c}),Object(o.jsx)("label",{style:{margin:2},children:e.name})]},e.id)}))}),Object(o.jsx)("div",{ref:function(e){return O.current=e},style:oe})]})},de=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).state={error:null,errorInfo:null},a}return Object(a.a)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Something went wrong."}),Object(o.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),Object(o.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),r}(l.a.Component);var je=function(){return Object(o.jsx)("div",{children:Object(o.jsx)(de,{children:Object(o.jsx)(ue,{})})})},fe=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(je,{})})}}]),r}(l.a.Component);d.a.render(Object(o.jsx)(fe,{}),document.getElementById("app"))}},[[310,1,2]]]);
//# sourceMappingURL=main.98956f01.chunk.js.map